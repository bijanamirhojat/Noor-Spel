<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kleuren - Noor's Games</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé®</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa8a8 50%, #ff8787 100%);
            font-family: 'Nunito', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 40px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 100%;
            text-align: center;
        }

        .back-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: #ff9a8b;
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 15px;
            font-family: 'Fredoka One', cursive;
            font-size: 0.9rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.15);
        }

        h1 {
            font-family: 'Fredoka One', cursive;
            color: #e63946;
            font-size: 1.6rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 0 #ffd5d5;
        }

        .color-palette {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
            padding: 10px;
            background: #fff5f5;
            border-radius: 20px;
        }

        .color-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid white;
            cursor: pointer;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
            transition: all 0.15s ease;
        }

        .color-btn:hover {
            transform: scale(1.1);
        }

        .color-btn.selected {
            border-color: #333;
            transform: scale(1.15);
            box-shadow: 0 0 0 2px #333;
        }

        .canvas-container {
            background: white;
            border-radius: 20px;
            padding: 10px;
            margin-bottom: 15px;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
        }

        .drawing-canvas {
            width: 100%;
            height: auto;
            border-radius: 15px;
            cursor: pointer;
            image-rendering: pixelated;
        }

        .toolbar {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .tool-btn {
            background: white;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            font-family: 'Fredoka One', cursive;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }

        .tool-btn:hover {
            transform: scale(1.05);
        }

        .tool-btn.clear {
            background: #ff7675;
            color: white;
        }

        .pictures-list {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .pic-btn {
            background: #fff;
            border: 3px solid #ddd;
            padding: 10px 15px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.2s ease;
        }

        .pic-btn:hover {
            border-color: #ff6b6b;
        }

        .pic-btn.selected {
            border-color: #e63946;
            background: #fff5f5;
        }

        .progress {
            font-size: 1rem;
            color: #666;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="game-container" style="position: relative;">
        <a href="../index.html" class="back-btn">üè† Terug</a>
        <h1>üé® Kleuren</h1>

        <div class="pictures-list">
            <button class="pic-btn selected" onclick="selectPicture('fish')">üêü</button>
            <button class="pic-btn" onclick="selectPicture('cat')">üê±</button>
            <button class="pic-btn" onclick="selectPicture('heart')">‚ù§Ô∏è</button>
            <button class="pic-btn" onclick="selectPicture('star')">‚≠ê</button>
            <button class="pic-btn" onclick="selectPicture('flower')">üå∏</button>
            <button class="pic-btn" onclick="selectPicture('rainbow')">üåà</button>
        </div>

        <div class="color-palette" id="palette"></div>

        <div class="canvas-container">
            <canvas id="canvas" class="drawing-canvas" width="320" height="240"></canvas>
        </div>

        <div class="progress" id="progress">0% ingekleurd</div>

        <div class="toolbar">
            <button class="tool-btn clear" onclick="clearCanvas()">Nieuw plaatje</button>
        </div>
    </div>

    <script>
        const colors = [
            '#FF6B6B', '#FF8E8E', '#FFB5B5', '#FFD5D5',
            '#FFE66D', '#FFA500', '#96CEB4', '#4ECDC4',
            '#45B7D1', '#74B9FF', '#A29BFE', '#DDA0DD',
            '#FFFFFF', '#808080', '#8B4513', '#000000'
        ];

        let selectedColor = colors[0];
        let currentPicture = 'fish';

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        const pictures = {
            fish: () => {
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 3;
                ctx.fillStyle = '#fff';
                
                // Lichaam
                ctx.beginPath();
                ctx.ellipse(160, 120, 90, 50, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                
                // Staart
                ctx.beginPath();
                ctx.moveTo(70, 120);
                ctx.lineTo(30, 80);
                ctx.lineTo(30, 160);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                
                // Oog
                ctx.beginPath();
                ctx.arc(200, 110, 12, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.arc(202, 108, 5, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.arc(205, 105, 2, 0, Math.PI * 2);
                ctx.fill();
                
                // Vin
                ctx.beginPath();
                ctx.moveTo(130, 85);
                ctx.quadraticCurveTo(160, 50, 190, 85);
                ctx.stroke();
                
                // Mond
                ctx.beginPath();
                ctx.arc(240, 130, 6, 0, Math.PI);
                ctx.stroke();
            },
            cat: () => {
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 3;
                ctx.fillStyle = '#fff';
                
                // Hoofd
                ctx.beginPath();
                ctx.arc(160, 130, 70, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                
                // Oren
                ctx.beginPath();
                ctx.moveTo(100, 85);
                ctx.lineTo(90, 40);
                ctx.lineTo(130, 70);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(220, 85);
                ctx.lineTo(230, 40);
                ctx.lineTo(190, 70);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                
                // Ogen
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.ellipse(135, 120, 12, 16, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                ctx.beginPath();
                ctx.ellipse(185, 120, 12, 16, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.arc(137, 120, 5, 0, Math.PI * 2);
                ctx.arc(187, 120, 5, 0, Math.PI * 2);
                ctx.fill();
                
                // Neus
                ctx.fillStyle = '#FFB5B5';
                ctx.beginPath();
                ctx.moveTo(160, 145);
                ctx.lineTo(154, 155);
                ctx.lineTo(166, 155);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                
                // Mond
                ctx.beginPath();
                ctx.moveTo(160, 155);
                ctx.lineTo(160, 168);
                ctx.moveTo(160, 168);
                ctx.lineTo(148, 178);
                ctx.moveTo(160, 168);
                ctx.lineTo(172, 178);
                ctx.stroke();
                
                // Snorharen
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(100, 150);
                ctx.lineTo(60, 145);
                ctx.moveTo(100, 158);
                ctx.lineTo(60, 158);
                ctx.moveTo(220, 150);
                ctx.lineTo(260, 145);
                ctx.moveTo(220, 158);
                ctx.lineTo(260, 158);
                ctx.stroke();
            },
            heart: () => {
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 3;
                ctx.fillStyle = '#fff';
                
                ctx.beginPath();
                ctx.moveTo(160, 60);
                ctx.bezierCurveTo(160, 40, 120, 40, 120, 80);
                ctx.bezierCurveTo(120, 120, 160, 160, 160, 180);
                ctx.bezierCurveTo(160, 160, 200, 120, 200, 80);
                ctx.bezierCurveTo(200, 40, 160, 40, 160, 60);
                ctx.fill();
                ctx.stroke();
            },
            star: () => {
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 3;
                ctx.fillStyle = '#fff';
                
                const drawStar = (cx, cy, spikes, outerRadius, innerRadius) => {
                    let rot = Math.PI / 2 * 3;
                    let x = cx;
                    let y = cy;
                    let step = Math.PI / spikes;

                    ctx.beginPath();
                    ctx.moveTo(cx, cy - outerRadius);
                    for (let i = 0; i < spikes; i++) {
                        x = cx + Math.cos(rot) * outerRadius;
                        y = cy + Math.sin(rot) * outerRadius;
                        ctx.lineTo(x, y);
                        rot += step;

                        x = cx + Math.cos(rot) * innerRadius;
                        y = cy + Math.sin(rot) * innerRadius;
                        ctx.lineTo(x, y);
                        rot += step;
                    }
                    ctx.lineTo(cx, cy - outerRadius);
                    ctx.closePath();
                    ctx.fill();
                    ctx.stroke();
                };

                drawStar(160, 120, 5, 90, 45);
            },
            flower: () => {
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 3;
                ctx.fillStyle = '#fff';
                
                // Stam
                ctx.fillRect(155, 150, 10, 80);
                ctx.strokeRect(155, 150, 10, 80);
                
                // Bloem
                for (let i = 0; i < 6; i++) {
                    const angle = (i / 6) * Math.PI * 2;
                    const x = 160 + Math.cos(angle) * 35;
                    const y = 110 + Math.sin(angle) * 35;
                    ctx.beginPath();
                    ctx.arc(x, y, 25, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.stroke();
                }
                
                // Hart
                ctx.beginPath();
                ctx.arc(160, 110, 20, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                
                // Blaadjes
                ctx.beginPath();
                ctx.ellipse(140, 180, 15, 8, -0.5, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                ctx.beginPath();
                ctx.ellipse(180, 185, 15, 8, 0.5, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
            },
            rainbow: () => {
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 2;
                
                const rainbowColors = ['#FF0000', '#FF7F00', '#FFFF00', '#00FF00', '#0000FF', '#4B0082', '#9400D3'];
                const radii = [100, 90, 80, 70, 60, 50, 40];
                
                rainbowColors.forEach((color, i) => {
                    ctx.beginPath();
                    ctx.arc(160, 200, radii[i], 0, Math.PI);
                    ctx.strokeStyle = color;
                    ctx.stroke();
                });
            }
        };

        function initPalette() {
            const palette = document.getElementById('palette');
            palette.innerHTML = '';
            colors.forEach((color, index) => {
                const btn = document.createElement('button');
                btn.className = 'color-btn' + (index === 0 ? ' selected' : '');
                btn.style.backgroundColor = color;
                btn.onclick = () => selectColor(color, btn);
                palette.appendChild(btn);
            });
        }

        function selectColor(color, btn) {
            selectedColor = color;
            document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        }

        function selectPicture(name) {
            currentPicture = name;
            document.querySelectorAll('.pic-btn').forEach(b => b.classList.remove('selected'));
            event.target.classList.add('selected');
            clearCanvas();
        }

        function clearCanvas() {
            ctx.fillStyle = '#fff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            pictures[currentPicture]();
            updateProgress();
        }

        function floodFill(startX, startY, fillColor) {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            const startPos = (startY * canvas.width + startX) * 4;
            const startR = data[startPos];
            const startG = data[startPos + 1];
            const startB = data[startPos + 2];
            
            const fillR = parseInt(fillColor.slice(1, 3), 16);
            const fillG = parseInt(fillColor.slice(3, 5), 16);
            const fillB = parseInt(fillColor.slice(5, 7), 16);
            
            if (startR === fillR && startG === fillG && startB === fillB) return;
            
            const tolerance = 50;
            
            function matchesStart(pos) {
                return Math.abs(data[pos] - startR) <= tolerance &&
                       Math.abs(data[pos + 1] - startG) <= tolerance &&
                       Math.abs(data[pos + 2] - startB) <= tolerance;
            }
            
            function isBorder(pos) {
                const r = data[pos], g = data[pos+1], b = data[pos+2];
                return r < 80 && g < 80 && b < 80;
            }
            
            const stack = [[startX, startY]];
            const visited = new Set();
            
            while (stack.length > 0) {
                const [x, y] = stack.pop();
                const key = `${x},${y}`;
                
                if (visited.has(key)) continue;
                if (x < 0 || x >= canvas.width || y < 0 || y >= canvas.height) continue;
                
                const pos = (y * canvas.width + x) * 4;
                if (isBorder(pos)) continue;
                if (!matchesStart(pos)) continue;
                
                visited.add(key);
                
                data[pos] = fillR;
                data[pos + 1] = fillG;
                data[pos + 2] = fillB;
                data[pos + 3] = 255;
                
                stack.push([x + 1, y]);
                stack.push([x - 1, y]);
                stack.push([x, y + 1]);
                stack.push([x, y - 1]);
            }
            
            ctx.putImageData(imageData, 0, 0);
            pictures[currentPicture]();
            updateProgress();
        }

        function handleClick(e) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            
            const x = Math.floor((e.clientX - rect.left) * scaleX);
            const y = Math.floor((e.clientY - rect.top) * scaleY);
            
            floodFill(x, y, selectedColor);
        }

        function updateProgress() {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const pixels = imageData.data;
            let coloredPixels = 0;
            
            for (let i = 0; i < pixels.length; i += 4) {
                if (pixels[i + 3] > 0) {
                    const r = pixels[i];
                    const g = pixels[i + 1];
                    const b = pixels[i + 2];
                    if (r !== 255 || g !== 255 || b !== 255) {
                        coloredPixels++;
                    }
                }
            }
            
            const totalPixels = canvas.width * canvas.height;
            const percent = Math.round((coloredPixels / totalPixels) * 100);
            document.getElementById('progress').textContent = percent + '% ingekleurd';
        }

        canvas.addEventListener('click', handleClick);

        initPalette();
        clearCanvas();
    </script>
</body>
</html>
