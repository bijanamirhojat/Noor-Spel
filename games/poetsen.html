<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="theme-color" content="#ff6b6b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Noor's Games">
    <title>Poetsen</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ§½</text></svg>">
    <link rel="manifest" href="../manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="shared.css">
    <style>
        .sponge { position: fixed; font-size: 3rem; pointer-events: none; z-index: 1000; transition: transform 0.1s; }
        .screen { position: relative; width: 100%; height: 280px; background: linear-gradient(180deg, #87CEEB 0%, #E0F7FA 50%, #90EE90 100%); border-radius: 25px; overflow: hidden; margin-bottom: 15px; cursor: none; }
        .dirt { position: absolute; font-size: 2rem; transition: opacity 0.3s; }
        .dirt.cleaned { opacity: 0; }
        .progress-bar { width: 100%; height: 20px; background: #eee; border-radius: 10px; overflow: hidden; margin-bottom: 10px; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #4CAF50, #8BC34A); transition: width 0.3s; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="game-container">
        <a href="../index.html" class="back-btn">ğŸ  Terug</a>
        <h1>ğŸ§½ Poetsen</h1>
        <div class="message" id="message">Wrijf over het scherm om schoon te maken!</div>
        <div class="screen" id="screen"></div>
        <div class="progress-bar"><div class="progress-fill" id="progress" style="width: 0%"></div></div>
        <div class="score">Schoon: <span id="percent">0</span>%</div>
    </div>
    <script src="shared.js"></script>
    <script>
        const screen = document.getElementById('screen');
        const progress = document.getElementById('progress');
        const percentDisplay = document.getElementById('percent');
        const message = document.getElementById('message');
        
        const dirtEmojis = ['ğŸ’©', 'ğŸª', 'ğŸ¥¤', 'ğŸ', 'ğŸ•', 'ğŸ¨', 'ğŸ–ï¸', 'ğŸŒ«ï¸'];
        let totalDirt = 15;
        let cleanedDirt = 0;
        
        function createDirt() {
            screen.innerHTML = '';
            cleanedDirt = 0;
            totalDirt = 15;
            
            for (let i = 0; i < totalDirt; i++) {
                const dirt = document.createElement('div');
                dirt.className = 'dirt';
                dirt.textContent = dirtEmojis[Math.floor(Math.random() * dirtEmojis.length)];
                dirt.style.left = Math.random() * 85 + '%';
                dirt.style.top = Math.random() * 85 + '%';
                dirt.style.transform = `rotate(${Math.random() * 360}deg)`;
                dirt.dataset.cleaned = 'false';
                screen.appendChild(dirt);
            }
            updateProgress();
        }
        
        function updateProgress() {
            const percent = Math.round((cleanedDirt / totalDirt) * 100);
            progress.style.width = percent + '%';
            percentDisplay.textContent = percent;
            
            if (percent >= 100) {
                playWin();
                message.textContent = 'Super! Alles is schoon! â­';
                setTimeout(() => {
                    message.textContent = 'Nog een keer?';
                    setTimeout(createDirt, 1500);
                }, 1000);
            }
        }
        
        let lastX, lastY;
        
        screen.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            checkClean(touch.clientX, touch.clientY);
        });
        
        screen.addEventListener('mousemove', (e) => {
            const rect = screen.getBoundingClientRect();
            checkClean(e.clientX, e.clientY);
        });
        
        function checkClean(x, y) {
            const rect = screen.getBoundingClientRect();
            const relX = x - rect.left;
            const relY = y - rect.top;
            
            document.querySelectorAll('.dirt:not(.cleaned)').forEach(dirt => {
                const dirtRect = dirt.getBoundingClientRect();
                const dirtX = dirtRect.left + dirtRect.width / 2;
                const dirtY = dirtRect.top + dirtRect.height / 2;
                const dist = Math.sqrt((x - dirtX) ** 2 + (y - dirtY) ** 2);
                
                if (dist < 40) {
                    dirt.classList.add('cleaned');
                    cleanedDirt++;
                    playPop();
                    updateProgress();
                }
            });
        }
        
        createDirt();
    </script>
</body>
</html>